#!/usr/bin/env ruby
require "#{File.dirname(__FILE__)}/../lib/cargo/command_helpers.rb"

`git checkout master`
`git pull origin master`

total = `git branch`.scan("story").size
if total == 0
  default = "story"
else
  default = "story_#{total + 1}"
end
name = Readline.readline "Topic name (#{default}): "
if name.strip.empty?
  name = default
end
story_number = Readline.readline "Story number (optional): "
unless story_number.strip.empty?
  name = "#{name}_#{story+number}"
end
`git checkout -b #{name}`
